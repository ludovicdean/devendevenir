---
title : ""
date : Dec 31 2030
tags :
- I-culture
description : ""
banner : "/images/gaelle-marcel-9DZY0mO98xU-unsplash.jpg"
author : ""
authorlink : ""
unsplashlink : ""
isArticle : true
---
Une fois n'est pas coutume, l'introduction de cet article va comporter une image, qui, √† elle seule repr√©sente le d√©samour des d√©veloppeurs pour les expressions r√©guli√®res !

![""](/devendevenir/images/regex_meme.png)

Malheureusement, le dev de droite est rest√© coinc√© avec sa regex pendant 2 ans, et maintenant il √©l√®ve des ch√®vres au fin fond du Cantal ! Pour √©viter la surpopulation d‚Äô√©leveurs de ch√®vres dans le Cantal, il faut d√©diaboliser les regex et apprendre √† mieux les conna√Ætre.

## L'origine des regex

Les regex puisent leurs origines aux √âtats-Unis, dans des √©quipes de recherche travaillant sur le syst√®me nerveux. De ces travaux, Stephen Cole Kleene, logicien de son √©tat, a d√©crit les mod√®les neuronaux d√©couverts en termes d‚Äôensembles r√©guliers. On le consid√®re comme l‚Äôinventeur des expressions r√©guli√®res.

D'accord, je vois vaguement d'o√π √ßa vient, mais √ßa ressemble √† quoi ?

## Regex : niveau 1

Quand vous recherchez un mot, le nom d‚Äôune variable, une phrase dans une page web, en g√©n√©ral, vous faites un Ctrl+F afin d‚Äôouvrir un champ de recherche qui recherche pour vous les occurences d‚Äôun mot dans cette page.

Ce champ de recherche utilise une regex afin de retrouver le mot saisi !

L‚Äôexpression r√©guli√®re la plus simple est donc un mot, une phrase, une suite de caract√®res quelconques (lettres, chiffres, symboles).

```
expression r√©guli√®re : r√©gulier
mots d√©tect√©s : r√©gulier
```

Vraiment ? C‚Äôest √ßa une expression r√©guli√®re ???

NON, ce n‚Äôest pas ‚Äúque‚Äù √ßa, c‚Äôest une expression r√©guli√®re r√©duite √† sa plus simple expression. Si on va au bout de l'id√©e, un simple caract√®re est une expression r√©guli√®re. La force des regex, c‚Äôest qu‚Äôelles permettent de rechercher des ensembles de cha√Ænes de caract√®res plus ou moins sp√©cifiques.

Du coup, comment on peut rechercher √† la fois r√©gulier et r√©guli√®res ? Il faut alors s‚Äôint√©resser √† la structure des regex.

## Regex : niveau 2

Dans un premier temps, on peut rechercher le premier mot, puis le second. Pas tr√®s pratique d√®s que le document est un peu long, et √ßa fait repasser 2 fois au m√™me endroit (pour peu qu‚Äôon ait seulement 2 termes proches).

Ce qui fait la force des regex, c‚Äôest qu‚Äôelles n‚Äôanalysent pas un texte par bloc, mais par groupes de cha√Ænes de caract√®res. Quand on y regarde de plus pr√®s, on se rend compte que les 2 mots ont des caract√©ristiques communes.

```
r√©gulier
r√©guli√®re
(r√©guli) e ou √® (r) e ou rien
```

On commence √† voir se dessiner des groupes de caract√®res communs, s√©par√©s par d'autres groupes de caract√®res qui varient dans une gamme de possibilit√©s limit√©es.

### Les groupes de caract√®res

Dans une regex, un groupe de caract√®res est repr√©sent√© par les caract√®res qu'il contient (normal me direz-vous üòÖ) entre parenth√®ses.

Pour rechercher les mots "r√©gulier" et "r√©guli√®re" dans un texte, on pourra utiliser l'expression r√©guli√®re suivante :

```
(r√©guli)
```

Vous trouverez effectivement les occurences de "r√©gulier" et de r√©guli√®re", mais vous trouverez √©galement les occurences de "r√©guli√®rement", "r√©guliez", et je vous passe les 3 possibilit√©s restantes.

Il y a peu de chances que "r√©guli√®rement" et "r√©guliez" soient fondamentaux dans votre recherche, vous voulez donc √™tre plus sp√©cifique.

Pour cela, nous allons aborder les m√©ta-caract√®res.

### Les m√©ta-caract√®res

Vous ne le savez pas encore, mais vous avez d√©j√† vu 2 de ces m√©ta-caract√®res dans cet article. Une id√©e ?

Les parenth√®ses qui d√©limitent un groupe de caract√®res sont des m√©ta-caract√®res, c'est-√†-dire des caract√®res qui donnent un sens, une fonction aux diff√©rents √©l√©ments d'une regex.

Parfois, on est amen√© √† rechercher deux mots se trouvant dans une m√™me phrase, mais n'√©tant jamais cons√©cutifs pour des raisons grammaticales. Rechercher un √©l√©ment, puis l'autre ne vous aidera pas √† trouver ce que vous cherchez. Dans ce type de cas, vous pouvez utiliser la combinaison de 2 m√©ta-caract√®res :

```
regex : Dans une regex(.*)contient
r√©sultat : Dans une regex, un groupe de caract√®res est repr√©sent√© par les caract√®res qu'il contient
```

Les m√©ta-caract√®res utilis√©s repr√©sentent respectivement :
- un seul caract√®re, quel qu'il soit `.`
- 0 √† n fois le caract√®re qui le pr√©c√®de `*`

Ces m√©ta-caract√®res ne sont pas les seuls, on trouve √©galement les suivants :

- `+` repr√©sente 1 √† n fois le caract√®re qui le pr√©c√®de `dev+` ‚û° `dev, devv, devvv`
- `?` repr√©sente 0, 1 ou n occurences du caract√®re ou du groupe qui le pr√©c√®de `dev?` ‚û° `de, dev, devv`
- `^` repr√©sente le d√©but d'une ligne `^dev` ‚û° `dev, deva, devb, develop` en d√©but de ligne mais pas `adev`
- `$` repr√©sente la fin d'une ligne `devenir$` ‚û° `dev en devenir`
- `|` repr√©sente l'√©l√©ment √† gauche ou celui √† droite de la barre `devenir|deviner` ‚û° `devenir, deviner`
- `\` permet d'√©chapper un m√©ta-caract√®re, afin de le rechercher en tant que caract√®re classique
- `\b` indique la limite d'un mot `\bdev\b` ‚û° `dev` mais pas `devenir`
- `{m}` repr√©sente le nombre exact d'occurences de l'√©l√©ment qui le pr√©c√®de `1{3}` ‚û° `111`
- `{m, n}` repr√©sente l'intervalle d'occurences recherch√© (1 √† 3 par exemple) `1{3, 4}` ‚û° `111, 1111`
- `{m,}` repr√©sente l'intervalle d'occurences recherch√© √† m minimum (2 minimum par exemple) `1{2,}` ‚û° `11, 111, 1111`
- `[abc]` correspond √† l'un des caract√®res `[dev]` ‚û° `d, e, v`
- `[^abc]` correspond √† aucun de ces caract√®res `[^dev]` ‚û° `ni d, ni e, ni v`

Il existe √©galement des groupes de caract√®res particuliers, permettant de traiter des groupes plus larges :

- `[A-Za-z]` correspond √† toutes les lettres de l'alphabet, majuscules et minuscules non accentu√©es
- `[0-9]` correspond aux chiffres
- `\d` correspond √©galement aux chiffres
- `\w` correspond aux caract√®res alphanum√©riques et l'underscore
- `\s` correspond √† un ou plusieurs espaces, tabulations ou retours √† la ligne
- `\n` correspond √† un saut de ligne

M√™me s'il ne para√Æt pas √©vident de prime abord que tous ces √©l√©ments sont ici pour nous faciliter la vie, on peut essayer de les combiner afin d'avoir un aper√ßu de leur utilit√©.

## Boss final : construire une regex

Les cas sont infinis. Ma premi√®re confrontation avec les regex remonte √† la conversion de sp√©cifications fonctionnelles de plusieurs dizaines de pages au format docx vers un format md.

Quand vous avez des r√®gles m√©tier par dizaines, qui poss√®dent une d√©finition et de multiples ancres, mieux vaut vous int√©resser aux regex sinon vous allez souffrir pour r√©soudre votre probl√®me.

Sur un site web, les formulaires sont de parfaits exemples. Ils doivent s'assurer que votre adresse mail a le bon format, ainsi que votre num√©ro de t√©l√©phone. Mais du coup, c'est quoi les regex derri√®re ces formulaires ?

Une adresse mail a le format suivant : devendevenir@devendevenir.fr. Si on compare plusieurs adresses mail, on constate qu'elles ont toutes la m√™me structure :

```
utilisateur@domaine.extension
```

La norme RFC 3696 pr√©cise les caract√®res sp√©ciaux que peut contenir une adresse email. La norme est tr√®s permissive, et de nombreux services appliquent des restrictions suppl√©mentaires. Nous allons donc consid√©rer que l'utilisateur d'un email peut contenir un point, un underscore ou un tiret.

D√©composons chaque partie de notre adresse email sous la forme d'une expression r√©guli√®re :

```
d√©but de la cha√Æne de caract√®res : ^
utilisateur : [a-zA-Z0-9._-]
s√©paration entre utilisateur et domaine : @
domaine : [a-zA-Z0-9.-]
s√©paration entre domaine et extension : \.
extension : [a-zA-Z]{2,}
fin de la cha√Æne de caract√®res : $
```

Pris s√©par√©ment, les fragments de la regex sont compr√©hensibles, tandis que la forme compl√®te est beaucoup plus impressionnante et semble donc plus complexe.

```
^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$
```

Si on reprend chaque partie de la regex, on peut voir les contraintes suivantes :

- l'utilisateur peut avoir n'importe quel caract√®re alphanum√©rique en plus du point, de l'underscore et du tiret comme dit plus haut.
- l'arobase est obligatoire.
- le domaine peut avoir n'importe quel caract√®re alphanum√©rique en plus du point et du tiret.
- l'extension comporte uniquement des lettres, et au minimum 2. C'est cette partie qui marque la fin de la cha√Æne de caract√®res.

## Regex : cheat sheet

Je ne suis pas toujours convaincu de l'utilit√© de l'IA dans certains domaines, mais force est de constater que la g√©n√©ration d'expressions r√©guli√®res (dans des cas simples).

Par ailleurs, il existe de nombreux sites web permettant de construire, tester et d√©bugger des expressions r√©guli√®res. On citera ici notamment [regex101](https://regex101.com/), qui est un redoutable outil pour qui est √† l'aise avec l'anglais.

## Conclusion

On ne croise pas tous les jours des expressions r√©guli√®res, mais depuis que je suis d√©veloppeur, je les ai d√©j√† cotoy√© 3 fois en 4 ans, dans des contextes tr√®s diff√©rents.

Maintenant que vous les comprenez mieux, ne vous reste plus qu'√† les apprivoiser !